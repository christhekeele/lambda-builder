# Variables:
#  ${APP}: (pathlike) name of application
#  ${APP_NAME}: tilelized version of ${APP}
#  ${FUN_NAME}: the lambda function's name
#  ${PATH}: the path to the function within the functions folder
#  ${CODE}: the path to the function code within the build folder

${APP_NAME}${FUN_NAME}Function:
  Type: AWS::Serverless::Function
  Properties:
    CodeUri: ${CODE}
    Handler: function.handler
    Events:

      TouchRaw${FUN_NAME}:
        Type: Api
        Properties:
          Path: /${PATH}/
          Method: options
      Touch${FUN_NAME}:
        Type: Api
        Properties:
          Path: /${PATH}
          Method: options
      TouchExtra${FUN_NAME}:
        Type: Api
        Properties:
          Path: /${PATH}/{extra+}
          Method: options

      GetRaw${FUN_NAME}:
        Type: Api
        Properties:
          Path: /${PATH}
          Method: get
      Get${FUN_NAME}:
        Type: Api
        Properties:
          Path: /${PATH}/
          Method: get
      GetExtra${FUN_NAME}:
        Type: Api
        Properties:
          Path: /${PATH}/{extra+}
          Method: get

      PostRaw${FUN_NAME}:
        Type: Api
        Properties:
          Path: /${PATH}
          Method: post
      Post${FUN_NAME}:
        Type: Api
        Properties:
          Path: /${PATH}/
          Method: post
      PostExtra${FUN_NAME}:
        Type: Api
        Properties:
          Path: /${PATH}/{extra+}
          Method: post
